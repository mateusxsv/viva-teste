<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vivamais - Plataforma de Agendamentos</title>
    <link rel="icon" type"image/x-icon" href="favicon.ico">
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background-color:rgb(0, 11, 170);
        color: #111827;
      }

      .header {
        background: white;
        border-bottom: 1px solid #e5e7eb;
        padding: 0 24px;
        height: 64px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 100;
      }

      .logo {
        font-size: 24px;
        font-weight: bold;
        color: #2563eb;
      }

      .header-right {
        display: flex;
        align-items: center;
        gap: 16px;
      }

      .menu-toggle {
        display: none;
        background: #2563eb;
        border: none;
        font-size: 20px;
        cursor: pointer;
        color: white;
        padding: 10px;
        min-height: 44px;
        min-width: 44px;
        border-radius: 6px;
        touch-action: manipulation;
        position: fixed;
        top: 10px;
        left: 10px;
        z-index: 1001;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
        animation: menuPulse 2s infinite;
      }

      .back-button {
        display: none;
        background: #059669;
        border: none;
        font-size: 18px;
        cursor: pointer;
        color: white;
        padding: 10px;
        min-height: 44px;
        min-width: 44px;
        border-radius: 6px;
        touch-action: manipulation;
        position: fixed;
        top: 10px;
        right: 10px;
        z-index: 1001;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
      }

      .back-button:active {
        transform: scale(0.95);
      }

      .menu-toggle:active {
        transform: scale(0.95);
      }

      @keyframes menuPulse {
        0%,
        100% {
          box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
        }
        50% {
          box-shadow: 0 2px 12px rgba(37, 99, 235, 0.6);
        }
      }

      .avatar {
        width: 32px;
        height: 32px;
        background: #2563eb;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 14px;
        font-weight: 500;
      }

      .sidebar {
        width: 256px;
        background: rgba(0, 3, 51, 0.62);
        border-right: 1px rgb(76, 213, 255);
        padding: 24px 16px;
        position: fixed;
        left: 0;
        top: 64px;
        bottom: 0;
        overflow-y: auto;
      }

      .nav-button {
        width: 100%;
        display: flex;
        align-items: center;
        padding: 12px 16px;
        margin-bottom: 8px;
        background: none;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        color:rgb(255, 255, 255);
        transition: all 0.2s;
        text-align: left;
      }

      .nav-button:hover {
        background:rgb(0, 107, 194);
      }

      .nav-button.active {
        background: #dbeafe;
        color: #1d4ed8;
      }

      .main-content {
        margin-left: 256px;
        margin-top: 64px;
        padding: 32px;
        flex: 1;
      }

      .content-section {
        display: none;
      }

      .content-section.active {
        display: block;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 24px;
        margin-bottom: 32px;
      }

      .stat-card {
        background: white;
        padding: 24px;
        border-radius: 8px;
        border: 1px solid #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .stat-value {
        font-size: 30px;
        font-weight: bold;
        margin-top: 8px;
      }

      .stat-label {
        font-size: 14px;
        font-weight: 500;
        color: #6b7280;
      }

      .green {
        color: #059669;
      }
      .blue {
        color: #2563eb;
      }
      .red {
        color: #dc2626;
      }
      .yellow {
        color: #d97706;
      }

      .table-container {
        background: rgb(255, 255, 255);
        border-radius: 8px;
        border: 1px solid #e5e7eb;
        overflow: hidden;
        margin-bottom: 24px;
      }

      .table-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 24px;
        border-bottom: 1px solid #e5e7eb;
      }

      .table-title {
        font-size: 20px;
        font-weight: bold;
      }

      .btn {
        background: #2563eb;
        color: white;
        border: none;
        padding: 10px 16px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: background 0.2s;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 4px;
      }

      .btn:hover {
        background: #1d4ed8;
      }

      .btn-sm {
        padding: 6px 12px;
        font-size: 12px;
      }

      .btn-green {
        background: #059669;
      }

      .btn-green:hover {
        background: #047857;
      }

      .btn-orange {
        background: #d97706;
      }

      .btn-orange:hover {
        background: #b45309;
      }

      table {
        width: 100%;
        border-collapse: collapse;
      }

      th {
        background: #f9fafb;
        padding: 12px 24px;
        text-align: left;
        font-size: 12px;
        font-weight: 500;
        color: #6b7280;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      td {
        padding: 16px 24px;
        border-bottom: 1px solid #e5e7eb;
        font-size: 14px;
      }

      tr:hover {
        background: #f9fafb;
      }

      .badge {
        display: inline-flex;
        padding: 4px 8px;
        font-size: 12px;
        font-weight: 600;
        border-radius: 20px;
      }

      .badge-green {
        background: #d1fae5;
        color: #065f46;
      }

      .badge-red {
        background: #fee2e2;
        color: #991b1b;
      }

      .badge-yellow {
        background: #fef3c7;
        color: #92400e;
      }

      .badge-blue {
        background: #dbeafe;
        color: #1e40af;
      }

      .risk-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 24px;
        margin-bottom: 32px;
      }

      .risk-card {
        background: white;
        padding: 24px;
        border-radius: 8px;
        border: 1px solid #e5e7eb;
      }

      .risk-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px;
        border-radius: 6px;
        margin-bottom: 12px;
      }

      .risk-high {
        background: #fee2e2;
      }
      .risk-medium {
        background: #fef3c7;
      }
      .risk-low {
        background: #d1fae5;
      }

      .waiting-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px;
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        margin-bottom: 12px;
        transition: background 0.2s;
      }

      .waiting-item:hover {
        background: #f9fafb;
      }

      .patient-info h4 {
        font-weight: 500;
        margin-bottom: 4px;
      }

      .patient-info .phone {
        font-size: 14px;
        color: #6b7280;
      }

      .patient-info .specialty {
        font-size: 14px;
        color: #2563eb;
      }

      .action-buttons {
        display: flex;
        gap: 8px;
      }

      .empty-state {
        text-align: center;
        padding: 48px;
        color: #6b7280;
      }

      .progress-item {
        margin-bottom: 16px;
      }

      .progress-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 4px;
        font-size: 14px;
      }

      .progress-bar {
        width: 100%;
        height: 8px;
        background: #e5e7eb;
        border-radius: 4px;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        border-radius: 4px;
        transition: width 0.3s ease;
      }

      .form-container {
        background: #f8fafc;
        border: 2px dashed #cbd5e1;
        border-radius: 8px;
      }

      .form-container input,
      .form-container select {
        transition: border-color 0.2s;
      }

      .form-container input:focus,
      .form-container select:focus {
        outline: none;
        border-color: #2563eb;
      }

      .cultural-card {
        background: white;
        border-radius: 12px;
        padding: 20px;
        border: 1px solid #e5e7eb;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .cultural-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      }

      .benefit-card {
        background: linear-gradient(135deg, #fef7ff 0%, #f3e8ff 100%);
        border-radius: 12px;
        padding: 20px;
        border: 2px solid #e879f9;
        transition: transform 0.2s;
      }

      .benefit-card:hover {
        transform: scale(1.02);
      }

      .gradient-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }

      .mobile-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
      }

      .mobile-overlay.active {
        display: block;
      }

      @media (max-width: 768px) {
        .sidebar {
          transform: translateX(-100%);
          transition: transform 0.3s ease-in-out;
        }
        .sidebar.mobile-open {
          transform: translateX(0);
        }
        .main-content {
          margin-left: 0;
        }
        .stats-grid {
          grid-template-columns: 1fr;
        }
        .form-container div {
          grid-template-columns: 1fr !important;
        }
        .header {
          display: none;
        }
        .menu-toggle,
        .back-button {
          display: block;
        }
      }
    </style>
  </head>
  <body>
    <button class="menu-toggle" id="menuToggle" onclick="toggleMobileMenu()">
      ‚ò∞
    </button>
    <button
      class="back-button"
      id="backButton"
      onclick="goToHome();"
      title="Voltar ao Dashboard"
    >
      üè†
    </button>

    <header class="header">
      <div class="logo">VivaMais</div>
      <div class="header-right">
        <div class="avatar">CS</div>
      </div>
    </header>

    <div
      class="mobile-overlay"
      id="mobileOverlay"
      onclick="closeMobileMenu()"
    ></div>

    <nav class="sidebar" id="sidebar">
      <button
        class="nav-button active"
        onclick="showSection('dashboard', this)"
      >
        üìä Dashboard
      </button>
      <button class="nav-button" onclick="showSection('appointments', this)">
        üìÖ Agendamentos
      </button>
      <button class="nav-button" onclick="showSection('waiting', this)">
        üë• Lista de Espera
      </button>
      <button class="nav-button" onclick="showSection('analytics', this)">
        üìà An√°lise e Relat√≥rios
      </button>
      <button class="nav-button" onclick="showSection('bonifications', this)">
        üéÅ Bonifica√ß√µes & Cultura
      </button>
    </nav>

    <main class="main-content">
      <section id="dashboard" class="content-section active">
        <div
          id="mobileInstruction"
          style="
            display: none;
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 24px;
            text-align: center;
          "
        >
          <div style="font-size: 18px; margin-bottom: 8px">
            üì± Bem-vindo ao ConfirmA√≠!
          </div>
          <div style="font-size: 14px; margin-bottom: 8px">
            Toque no bot√£o <strong>‚ò∞</strong> para navegar entre as se√ß√µes
          </div>
          <div style="font-size: 14px">
            Toque no bot√£o <strong>üè†</strong> para voltar ao in√≠cio
          </div>
        </div>

        <div
          id="mobileQuickNav"
          style="
            display: none;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 24px;
            overflow-x: auto;
          "
        >
          <div style="display: flex; gap: 8px; min-width: max-content">
            <button
              id="quickDash"
              onclick="showSection('dashboard', this)"
              class="btn btn-sm"
              style="background: #2563eb"
            >
              üìä Dashboard
            </button>
            <button
              id="quickAppts"
              onclick="showSection('appointments', this)"
              class="btn btn-sm"
              style="background: #6b7280"
            >
              üìÖ Agendamentos
            </button>
            <button
              id="quickWait"
              onclick="showSection('waiting', this)"
              class="btn btn-sm"
              style="background: #6b7280"
            >
              üë• Lista Espera
            </button>
            <button
              id="quickBonif"
              onclick="showSection('bonifications', this)"
              class="btn btn-sm"
              style="background: #6b7280"
            >
              üéÅ Bonifica√ß√µes
            </button>
            <button
              id="quickAnalyt"
              onclick="showSection('analytics', this)"
              class="btn btn-sm"
              style="background: #6b7280"
            >
              üìà Relat√≥rios
            </button>
          </div>
        </div>

        <div class="stats-grid">
          <div class="stat-card">
            <div>
              <div class="stat-label">Consultas Hoje</div>
              <div class="stat-value">24</div>
            </div>
            <div style="font-size: 32px">üìÖ</div>
          </div>
          <div class="stat-card">
            <div>
              <div class="stat-label">Taxa de Confirma√ß√£o</div>
              <div class="stat-value green">85%</div>
            </div>
            <div style="font-size: 32px">‚úÖ</div>
          </div>
          <div class="stat-card">
            <div>
              <div class="stat-label">No-Show Evitados</div>
              <div class="stat-value blue">8</div>
            </div>
            <div style="font-size: 32px">üìà</div>
          </div>
        </div>

        <div class="risk-grid">
          <div class="risk-card">
            <h3 style="margin-bottom: 16px; font-size: 18px">
              An√°lise Preditiva - Hoje
            </h3>
            <div class="risk-item risk-high">
              <span style="font-weight: 500">Alto Risco de Falta</span>
              <span class="red" style="font-weight: bold">3 pacientes</span>
            </div>
            <div class="risk-item risk-medium">
              <span style="font-weight: 500">M√©dio Risco</span>
              <span class="yellow" style="font-weight: bold">5 pacientes</span>
            </div>
            <div class="risk-item risk-low">
              <span style="font-weight: 500">Baixo Risco</span>
              <span class="green" style="font-weight: bold">16 pacientes</span>
            </div>
          </div>

          <div class="risk-card">
            <h3 style="margin-bottom: 16px; font-size: 18px">
              Receita Protegida
            </h3>
            <div style="text-align: center">
              <div
                style="
                  font-size: 30px;
                  font-weight: bold;
                  color: #059669;
                  margin-bottom: 8px;
                "
              >
                R$ 12.500
              </div>
              <p style="font-size: 14px; color: #6b7280; margin-bottom: 16px">
                Economia este m√™s com redu√ß√£o de no-shows
              </p>
              <div
                style="background: #d1fae5; padding: 12px; border-radius: 6px"
              >
                <p style="font-size: 14px; color: #065f46">
                  üìà +23% comparado ao m√™s anterior
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="appointments" class="content-section">
        <div
          id="newAppointmentForm"
          class="table-container form-container"
          style="display: none; margin-bottom: 24px"
        >
          <div class="table-header">
            <h3 class="table-title">‚ûï Novo Agendamento</h3>
            <button class="btn btn-orange" onclick="closeNewAppointmentForm()">
              ‚ùå Cancelar
            </button>
          </div>
          <div style="padding: 24px">
            <div
              style="
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 16px;
                margin-bottom: 16px;
              "
            >
              <div>
                <label
                  style="display: block; margin-bottom: 4px; font-weight: 500"
                  >Nome do Paciente:</label
                >
                <input
                  type="text"
                  id="newPatientName"
                  style="
                    width: 100%;
                    padding: 8px;
                    border: 1px solid #e5e7eb;
                    border-radius: 4px;
                  "
                />
              </div>
              <div>
                <label
                  style="display: block; margin-bottom: 4px; font-weight: 500"
                  >Telefone:</label
                >
                <input
                  type="text"
                  id="newPatientPhone"
                  placeholder="(11) 99999-9999"
                  style="
                    width: 100%;
                    padding: 8px;
                    border: 1px solid #e5e7eb;
                    border-radius: 4px;
                  "
                />
              </div>
            </div>
            <div
              style="
                display: grid;
                grid-template-columns: 1fr 1fr 1fr;
                gap: 16px;
                margin-bottom: 16px;
              "
            >
              <div>
                <label
                  style="display: block; margin-bottom: 4px; font-weight: 500"
                  >Hor√°rio:</label
                >
                <input
                  type="time"
                  id="newAppointmentTime"
                  style="
                    width: 100%;
                    padding: 8px;
                    border: 1px solid #e5e7eb;
                    border-radius: 4px;
                  "
                />
              </div>
              <div>
                <label
                  style="display: block; margin-bottom: 4px; font-weight: 500"
                  >Especialidade:</label
                >
                <select
                  id="newAppointmentSpecialty"
                  style="
                    width: 100%;
                    padding: 8px;
                    border: 1px solid #e5e7eb;
                    border-radius: 4px;
                  "
                >
                  <option value="Cardiologia">Cardiologia</option>
                  <option value="Dermatologia">Dermatologia</option>
                  <option value="Ortopedia">Ortopedia</option>
                  <option value="Pediatria">Pediatria</option>
                  <option value="Ginecologia">Ginecologia</option>
                </select>
              </div>
              <div>
                <label
                  style="display: block; margin-bottom: 4px; font-weight: 500"
                  >Risco Previsto:</label
                >
                <select
                  id="newAppointmentRisk"
                  style="
                    width: 100%;
                    padding: 8px;
                    border: 1px solid #e5e7eb;
                    border-radius: 4px;
                  "
                >
                  <option value="low">Baixo</option>
                  <option value="medium">M√©dio</option>
                  <option value="high">Alto</option>
                </select>
              </div>
            </div>
            <button
              class="btn btn-green"
              onclick="saveNewAppointment()"
              style="margin-right: 8px"
            >
              ‚úÖ Salvar Agendamento
            </button>
            <button class="btn" onclick="closeNewAppointmentForm()">
              ‚ùå Cancelar
            </button>
          </div>
        </div>

        <div class="table-container">
          <div class="table-header">
            <h2 class="table-title">Agendamentos - Hoje</h2>
            <button class="btn" onclick="openNewAppointmentForm()">
              ‚ûï Novo Agendamento
            </button>
          </div>
          <table>
            <thead>
              <tr>
                <th>Paciente</th>
                <th>Hor√°rio</th>
                <th>Especialidade</th>
                <th>Status</th>
                <th>Risco</th>
                <th>A√ß√µes</th>
              </tr>
            </thead>
            <tbody id="appointmentsBody"></tbody>
          </table>
        </div>
      </section>

      <section id="bonifications" class="content-section">
        <div style="margin-bottom: 32px">
          <h2
            style="
              font-size: 28px;
              font-weight: bold;
              margin-bottom: 8px;
              color:rgb(136, 217, 255);
            "
          >
            üéÅ Programa de Bonifica√ß√µes Viva+
          </h2>
          <p style="font-size: 16px; color:rgb(255, 255, 255); margin-bottom: 24px">
            Parcerias com a Prefeitura de Recife - Incentive seus pacientes com
            cultura e lazer!
          </p>

          <div class="stats-grid">
            <div
              class="stat-card"
              style="
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
              "
            >
              <div>
                <div class="stat-label" style="color: #e0e7ff">
                  Pacientes Engajados
                </div>
                <div class="stat-value" style="color: white">156</div>
              </div>
              <div style="font-size: 32px">üèÜ</div>
            </div>
            <div
              class="stat-card"
              style="
                background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                color: white;
              "
            >
              <div>
                <div class="stat-label" style="color: #fce7f3">
                  Benef√≠cios Resgatados
                </div>
                <div class="stat-value" style="color: white">89</div>
              </div>
              <div style="font-size: 32px">üé™</div>
            </div>
            <div
              class="stat-card"
              style="
                background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
                color: white;
              "
            >
              <div>
                <div class="stat-label" style="color: #e0f2fe">
                  Taxa de Confirma√ß√£o
                </div>
                <div class="stat-value" style="color: white">+34%</div>
              </div>
              <div style="font-size: 32px">üìà</div>
            </div>
          </div>
        </div>

        <div class="table-container" style="margin-bottom: 32px">
          <div
            class="table-header"
            style="
              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
              color: white;
            "
          >
            <h3 class="table-title" style="color: white">
              ‚≠ê Sistema de Pontos Viva+
            </h3>
            <button
              class="btn"
              style="background: white; color: #667eea"
              onclick="showPointsDetails()"
            >
              üìä Ver Detalhes
            </button>
          </div>
          <div style="padding: 24px; background: #f8fafc">
            <div
              style="
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 16px;
              "
            >
              <div
                style="
                  text-align: center;
                  padding: 20px;
                  background: white;
                  border-radius: 12px;
                  border: 2px solid #e0e7ff;
                "
              >
                <div style="font-size: 24px; margin-bottom: 8px">‚úÖ</div>
                <h4 style="font-weight: 600; margin-bottom: 4px">
                  Confirma√ß√£o de Consulta
                </h4>
                <p style="color: #059669; font-weight: bold">+10 pontos</p>
              </div>
              <div
                style="
                  text-align: center;
                  padding: 20px;
                  background: white;
                  border-radius: 12px;
                  border: 2px solid #fef3c7;
                "
              >
                <div style="font-size: 24px; margin-bottom: 8px">‚è∞</div>
                <h4 style="font-weight: 600; margin-bottom: 4px">
                  Pontualidade
                </h4>
                <p style="color: #d97706; font-weight: bold">+5 pontos</p>
              </div>
              <div
                style="
                  text-align: center;
                  padding: 20px;
                  background: white;
                  border-radius: 12px;
                  border: 2px solid #fce7f3;
                "
              >
                <div style="font-size: 24px; margin-bottom: 8px">üìÖ</div>
                <h4 style="font-weight: 600; margin-bottom: 4px">
                  Consulta Realizada
                </h4>
                <p style="color: #be185d; font-weight: bold">+15 pontos</p>
              </div>
              <div
                style="
                  text-align: center;
                  padding: 20px;
                  background: white;
                  border-radius: 12px;
                  border: 2px solid #dcfdf7;
                "
              >
                <div style="font-size: 24px; margin-bottom: 8px">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                <h4 style="font-weight: 600; margin-bottom: 4px">
                  Indica√ß√£o de Amigo
                </h4>
                <p style="color: #059669; font-weight: bold">+25 pontos</p>
              </div>
            </div>
          </div>
        </div>

        <div class="table-container" style="margin-bottom: 32px">
          <div
            class="table-header"
            style="
              background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
              color: white;
            "
          >
            <h3 class="table-title" style="color: white">
              üèõÔ∏è Parceria Prefeitura de Recife - Projetos Culturais
            </h3>
            <button
              class="btn"
              style="background: white; color: #4facfe"
              onclick="refreshCulturalProjects()"
            >
              üîÑ Atualizar
            </button>
          </div>
          <div style="padding: 24px">
            <div
              id="culturalProjectsContainer"
              style="
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
                gap: 20px;
              "
            ></div>
          </div>
        </div>

        <div class="table-container">
          <div
            class="table-header"
            style="
              background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
              color: white;
            "
          >
            <h3 class="table-title" style="color: white">
              üé™ Benef√≠cios Dispon√≠veis para Resgate
            </h3>
            <button
              class="btn"
              style="background: white; color: #f093fb"
              onclick="openBenefitsManager()"
            >
              ‚öôÔ∏è Gerenciar
            </button>
          </div>
          <div style="padding: 24px">
            <div
              id="benefitsContainer"
              style="
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 20px;
              "
            ></div>
          </div>
        </div>
      </section>

      <section id="waiting" class="content-section">
        <div
          id="newWaitingForm"
          class="table-container form-container"
          style="display: none; margin-bottom: 24px"
        >
          <div class="table-header">
            <h3 class="table-title">‚ûï Adicionar √† Lista de Espera</h3>
            <button class="btn btn-orange" onclick="closeNewWaitingForm()">
              ‚ùå Cancelar
            </button>
          </div>
          <div style="padding: 24px">
            <div
              style="
                display: grid;
                grid-template-columns: 1fr 1fr 1fr;
                gap: 16px;
                margin-bottom: 16px;
              "
            >
              <div>
                <label
                  style="display: block; margin-bottom: 4px; font-weight: 500"
                  >Nome do Paciente:</label
                >
                <input
                  type="text"
                  id="newWaitingName"
                  style="
                    width: 100%;
                    padding: 8px;
                    border: 1px solid #e5e7eb;
                    border-radius: 4px;
                  "
                />
              </div>
              <div>
                <label
                  style="display: block; margin-bottom: 4px; font-weight: 500"
                  >Telefone:</label
                >
                <input
                  type="text"
                  id="newWaitingPhone"
                  placeholder="(11) 99999-9999"
                  style="
                    width: 100%;
                    padding: 8px;
                    border: 1px solid #e5e7eb;
                    border-radius: 4px;
                  "
                />
              </div>
              <div>
                <label
                  style="display: block; margin-bottom: 4px; font-weight: 500"
                  >Especialidade:</label
                >
                <select
                  id="newWaitingSpecialty"
                  style="
                    width: 100%;
                    padding: 8px;
                    border: 1px solid #e5e7eb;
                    border-radius: 4px;
                  "
                >
                  <option value="Cardiologia">Cardiologia</option>
                  <option value="Dermatologia">Dermatologia</option>
                  <option value="Ortopedia">Ortopedia</option>
                  <option value="Pediatria">Pediatria</option>
                  <option value="Ginecologia">Ginecologia</option>
                </select>
              </div>
            </div>
            <button
              class="btn btn-green"
              onclick="saveNewWaitingPatient()"
              style="margin-right: 8px"
            >
              ‚úÖ Adicionar √† Lista
            </button>
            <button class="btn" onclick="closeNewWaitingForm()">
              ‚ùå Cancelar
            </button>
          </div>
        </div>

        <div class="table-container">
          <div class="table-header">
            <h2 class="table-title">Lista de Espera Inteligente</h2>
            <button class="btn" onclick="openNewWaitingForm()">
              ‚ûï Adicionar √† Lista
            </button>
          </div>
          <div style="padding: 24px">
            <h3 style="font-size: 18px; margin-bottom: 16px">
              Pacientes Aguardando
            </h3>
            <div id="waitingListContainer"></div>
          </div>
        </div>

        <div class="risk-card" style="margin-top: 24px">
          <h3 style="font-size: 18px; margin-bottom: 16px">
            Funcionamento da Lista Inteligente
          </h3>
          <div
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
              gap: 16px;
            "
          >
            <div
              style="
                text-align: center;
                padding: 16px;
                background: #dbeafe;
                border-radius: 8px;
              "
            >
              <div style="font-size: 32px; margin-bottom: 8px">üîç</div>
              <h4 style="font-weight: 500; margin-bottom: 8px">
                1. Detec√ß√£o Autom√°tica
              </h4>
              <p style="font-size: 14px; color: #6b7280">
                Sistema identifica n√£o confirma√ß√µes e cancelamentos
              </p>
            </div>
            <div
              style="
                text-align: center;
                padding: 16px;
                background: #d1fae5;
                border-radius: 8px;
              "
            >
              <div style="font-size: 32px; margin-bottom: 8px">üì±</div>
              <h4 style="font-weight: 500; margin-bottom: 8px">
                2. Notifica√ß√£o Inteligente
              </h4>
              <p style="font-size: 14px; color: #6b7280">
                Pacientes ideais s√£o notificados automaticamente
              </p>
            </div>
            <div
              style="
                text-align: center;
                padding: 16px;
                background: #ede9fe;
                border-radius: 8px;
              "
            >
              <div style="font-size: 32px; margin-bottom: 8px">‚ö°</div>
              <h4 style="font-weight: 500; margin-bottom: 8px">
                3. Preenchimento R√°pido
              </h4>
              <p style="font-size: 14px; color: #6b7280">
                Vagas s√£o preenchidas em minutos, n√£o horas
              </p>
            </div>
          </div>
        </div>
      </section>

      <section id="analytics" class="content-section">
        <h2 style="margin-bottom: 32px; font-size: 24px; font-weight: bold">
          üìä An√°lise e Relat√≥rios
        </h2>

        <div class="risk-grid">
          <div class="risk-card">
            <h3 style="font-size: 18px; margin-bottom: 16px">
              Performance Semanal
            </h3>
            <div class="progress-item">
              <div class="progress-header">
                <span>Taxa de Confirma√ß√£o</span>
                <span>85%</span>
              </div>
              <div class="progress-bar">
                <div
                  class="progress-fill"
                  style="width: 85%; background: #059669"
                ></div>
              </div>
            </div>
            <div class="progress-item">
              <div class="progress-header">
                <span>Redu√ß√£o de No-Show</span>
                <span>73%</span>
              </div>
              <div class="progress-bar">
                <div
                  class="progress-fill"
                  style="width: 73%; background: #2563eb"
                ></div>
              </div>
            </div>
            <div class="progress-item">
              <div class="progress-header">
                <span>Preenchimento da Lista de Espera</span>
                <span>92%</span>
              </div>
              <div class="progress-bar">
                <div
                  class="progress-fill"
                  style="width: 92%; background: #7c3aed"
                ></div>
              </div>
            </div>
          </div>

          <div class="risk-card">
            <h3 style="font-size: 18px; margin-bottom: 16px">
              üí∞ Impacto Financeiro
            </h3>
            <div class="risk-item risk-low">
              <span style="font-weight: 500">Receita Recuperada</span>
              <span class="green" style="font-weight: bold">R$ 12.500</span>
            </div>
            <div class="risk-item" style="background: #dbeafe">
              <span style="font-weight: 500">Economia Operacional</span>
              <span class="blue" style="font-weight: bold">R$ 3.200</span>
            </div>
            <div class="risk-item" style="background: #ede9fe">
              <span style="font-weight: 500">ROI da Plataforma</span>
              <span style="color: #7c3aed; font-weight: bold">320%</span>
            </div>
          </div>
        </div>

        <div class="table-container">
          <div class="table-header">
            <h3 class="table-title">üìà Hist√≥rico de Confirma√ß√µes</h3>
          </div>
          <table>
            <thead>
              <tr>
                <th>Data</th>
                <th>Total Enviadas</th>
                <th>WhatsApp</th>
                <th>SMS</th>
                <th>Taxa de Resposta</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>20/08/2025</td>
                <td>28</td>
                <td>22</td>
                <td>6</td>
                <td><span class="badge badge-green">89%</span></td>
              </tr>
              <tr>
                <td>19/08/2025</td>
                <td>31</td>
                <td>25</td>
                <td>6</td>
                <td><span class="badge badge-green">83%</span></td>
              </tr>
              <tr>
                <td>18/08/2025</td>
                <td>26</td>
                <td>20</td>
                <td>6</td>
                <td><span class="badge badge-green">91%</span></td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </main>

    <script>
      // Dados dos agendamentos
      var appointments = [
        {
          id: 1,
          patient: "Maria Silva",
          phone: "(11) 99999-1234",
          time: "09:00",
          status: "confirmed",
          riskLevel: "low",
          specialty: "Cardiologia",
        },
        {
          id: 2,
          patient: "Jo√£o Santos",
          phone: "(11) 99999-5678",
          time: "10:30",
          status: "pending",
          riskLevel: "high",
          specialty: "Dermatologia",
        },
        {
          id: 3,
          patient: "Ana Costa",
          phone: "(11) 99999-9012",
          time: "14:00",
          status: "not_confirmed",
          riskLevel: "medium",
          specialty: "Ortopedia",
        },
        {
          id: 4,
          patient: "Carlos Lima",
          phone: "(11) 99999-3456",
          time: "15:30",
          status: "confirmed",
          riskLevel: "low",
          specialty: "Cardiologia",
        },
      ];

      // Lista de espera
      var waitingList = [
        {
          id: 1,
          patient: "Pedro Oliveira",
          phone: "(11) 99999-7890",
          specialty: "Cardiologia",
        },
        {
          id: 2,
          patient: "Lucia Ferreira",
          phone: "(11) 99999-2468",
          specialty: "Dermatologia",
        },
        {
          id: 3,
          patient: "Roberto Alves",
          phone: "(11) 99999-1357",
          specialty: "Ortopedia",
        },
      ];

      // Projetos Culturais da Prefeitura de Recife
      var culturalProjects = [
        {
          id: 1,
          title: "Festival de Inverno de Bonito",
          description:
            "Festival de m√∫sica e arte com shows gratuitos no Parque da Jaqueira",
          category: "M√∫sica",
          date: "15-30 Agosto 2025",
          location: "Parque da Jaqueira",
          points: 50,
          image: "üéµ",
          status: "Dispon√≠vel",
        },
        {
          id: 2,
          title: "Circuito Cultural Marco Zero",
          description:
            "Exposi√ß√µes de arte e cultura pernambucana no centro hist√≥rico",
          category: "Arte",
          date: "Todo m√™s",
          location: "Marco Zero",
          points: 30,
          image: "üé®",
          status: "Dispon√≠vel",
        },
        {
          id: 3,
          title: "Cinema no Parque",
          description: "Sess√µes de cinema ao ar livre com filmes nacionais",
          category: "Cinema",
          date: "Quartas e Domingos",
          location: "Parque 13 de Maio",
          points: 25,
          image: "üé¨",
          status: "Dispon√≠vel",
        },
        {
          id: 4,
          title: "Aulas de Dan√ßa Popular",
          description:
            "Aulas gratuitas de frevo, maracatu e outros ritmos regionais",
          category: "Dan√ßa",
          date: "Ter√ßas e Quintas",
          location: "Casa da Cultura",
          points: 40,
          image: "üíÉ",
          status: "Dispon√≠vel",
        },
        {
          id: 5,
          title: "Biblioteca M√≥vel",
          description:
            "Empr√©stimo de livros e atividades de leitura nos bairros",
          category: "Literatura",
          date: "Segunda a S√°bado",
          location: "V√°rios bairros",
          points: 20,
          image: "üìö",
          status: "Dispon√≠vel",
        },
        {
          id: 6,
          title: "Oficinas de Artesanato",
          description:
            "Aprenda t√©cnicas tradicionais de artesanato pernambucano",
          category: "Artesanato",
          date: "S√°bados",
          location: "Mercado de S√£o Jos√©",
          points: 35,
          image: "üñºÔ∏è",
          status: "Dispon√≠vel",
        },
      ];

      // Benef√≠cios para Resgate
      var availableBenefits = [
        {
          id: 1,
          title: "Ingresso Museu da Cidade",
          description: "Entrada gratuita para o Museu da Cidade do Recife",
          points: 30,
          image: "üèõÔ∏è",
          category: "Cultura",
          validity: "30 dias",
        },
        {
          id: 2,
          title: "Desconto Teatro Santa Isabel",
          description: "50% de desconto em pe√ßas do Teatro Santa Isabel",
          points: 80,
          image: "üé≠",
          category: "Teatro",
          validity: "60 dias",
        },
        {
          id: 3,
          title: "Passeio de Catamaran",
          description: "Passeio gratuito pelos rios do Recife",
          points: 100,
          image: "‚õµ",
          category: "Turismo",
          validity: "90 dias",
        },
        {
          id: 4,
          title: "Aula de Culin√°ria Regional",
          description: "Aprenda pratos t√≠picos pernambucanos",
          points: 60,
          image: "üë®‚Äçüç≥",
          category: "Gastronomia",
          validity: "45 dias",
        },
        {
          id: 5,
          title: "Kit Livros Regionais",
          description: "Cole√ß√£o de livros sobre a cultura pernambucana",
          points: 45,
          image: "üìñ",
          category: "Literatura",
          validity: "Permanente",
        },
        {
          id: 6,
          title: "Workshop de Fotografia",
          description: "Workshop de fotografia urbana no Recife Antigo",
          points: 70,
          image: "üì∏",
          category: "Arte",
          validity: "30 dias",
        },
      ];

      // Fun√ß√£o para mudar se√ß√£o ativa
      function showSection(sectionId, buttonElement) {
        // Esconder todas as se√ß√µes
        var sections = document.querySelectorAll(".content-section");
        for (var i = 0; i < sections.length; i++) {
          sections[i].classList.remove("active");
        }

        // Mostrar se√ß√£o selecionada
        document.getElementById(sectionId).classList.add("active");

        // Atualizar bot√£o ativo no sidebar
        var buttons = document.querySelectorAll(".nav-button");
        for (var i = 0; i < buttons.length; i++) {
          buttons[i].classList.remove("active");
        }

        // Atualizar navega√ß√£o r√°pida
        updateQuickNavigation(sectionId);

        // Se o bot√£o clicado √© do sidebar, ativ√°-lo
        if (buttonElement && buttonElement.classList.contains("nav-button")) {
          buttonElement.classList.add("active");
        } else {
          // Se foi clicado na navega√ß√£o r√°pida, ativar o bot√£o correspondente no sidebar
          var sidebarButtons = {
            dashboard: 0,
            appointments: 1,
            waiting: 2,
            bonifications: 3,
            analytics: 4,
          };
          var index = sidebarButtons[sectionId];
          if (index !== undefined && buttons[index]) {
            buttons[index].classList.add("active");
          }
        }

        // Fechar menu mobile se estiver aberto
        if (window.innerWidth <= 768) {
          closeMobileMenu();
        }

        // Renderizar conte√∫do espec√≠fico
        if (sectionId === "appointments") {
          renderAppointments();
        } else if (sectionId === "waiting") {
          renderWaitingList();
        } else if (sectionId === "bonifications") {
          renderCulturalProjects();
          renderBenefits();
        }
      }

      // Fun√ß√£o para atualizar navega√ß√£o r√°pida visual
      function updateQuickNavigation(activeSection) {
        try {
          var quickButtons = {
            dashboard: { id: "quickDash", color: "#2563eb" },
            appointments: { id: "quickAppts", color: "#059669" },
            waiting: { id: "quickWait", color: "#d97706" },
            bonifications: { id: "quickBonif", color: "#7c3aed" },
            analytics: { id: "quickAnalyt", color: "#dc2626" },
          };

          // Resetar todos os bot√µes para cinza
          for (var section in quickButtons) {
            var btn = document.getElementById(quickButtons[section].id);
            if (btn) {
              btn.style.background = "#6b7280";
            }
          }

          // Ativar bot√£o da se√ß√£o atual
          if (quickButtons[activeSection]) {
            var activeBtn = document.getElementById(
              quickButtons[activeSection].id
            );
            if (activeBtn) {
              activeBtn.style.background = quickButtons[activeSection].color;
            }
          }
        } catch (error) {
          console.log("Erro na navega√ß√£o r√°pida:", error);
        }
      }

      // Fun√ß√£o simples para voltar ao dashboard (vers√£o de backup)
      function voltarParaInicio() {
        console.log("üè† Fun√ß√£o de voltar ativada!");

        // Esconder todas as se√ß√µes
        var sections = document.querySelectorAll(".content-section");
        for (var i = 0; i < sections.length; i++) {
          sections[i].classList.remove("active");
        }

        // Mostrar dashboard
        document.getElementById("dashboard").classList.add("active");

        // Ativar primeiro bot√£o da sidebar
        var navButtons = document.querySelectorAll(".nav-button");
        for (var i = 0; i < navButtons.length; i++) {
          navButtons[i].classList.remove("active");
        }
        if (navButtons[0]) navButtons[0].classList.add("active");
      }

      // Fun√ß√µes para menu mobile
      function toggleMobileMenu() {
        var sidebar = document.getElementById("sidebar");
        var overlay = document.getElementById("mobileOverlay");
        var menuButton = document.getElementById("menuToggle");

        if (sidebar.classList.contains("mobile-open")) {
          closeMobileMenu();
        } else {
          openMobileMenu();
        }
      }

      function openMobileMenu() {
        var sidebar = document.getElementById("sidebar");
        var overlay = document.getElementById("mobileOverlay");
        var menuButton = document.getElementById("menuToggle");

        sidebar.classList.add("mobile-open");
        overlay.classList.add("active");
        if (menuButton) menuButton.innerHTML = "‚úï";
      }

      function closeMobileMenu() {
        var sidebar = document.getElementById("sidebar");
        var overlay = document.getElementById("mobileOverlay");
        var menuButton = document.getElementById("menuToggle");

        sidebar.classList.remove("mobile-open");
        overlay.classList.remove("active");
        if (menuButton) menuButton.innerHTML = "‚ò∞";
      }

      // Fun√ß√£o para voltar ao dashboard
      function goToHome() {
        console.log("Voltando para o Dashboard...");

        // Esconder todas as se√ß√µes
        var sections = document.querySelectorAll(".content-section");
        for (var i = 0; i < sections.length; i++) {
          sections[i].classList.remove("active");
        }

        // Mostrar dashboard
        var dashboard = document.getElementById("dashboard");
        if (dashboard) {
          dashboard.classList.add("active");
        }

        // Ativar bot√£o do dashboard no sidebar
        var buttons = document.querySelectorAll(".nav-button");
        for (var i = 0; i < buttons.length; i++) {
          buttons[i].classList.remove("active");
        }
        if (buttons.length > 0 && buttons[0]) {
          buttons[0].classList.add("active");
        }

        // Atualizar navega√ß√£o r√°pida
        updateQuickNavigation("dashboard");

        // Fechar menu se estiver aberto
        closeMobileMenu();

        // Feedback visual do bot√£o
        var backButton = document.getElementById("backButton");
        if (backButton) {
          backButton.style.background = "#10b981";
          backButton.innerHTML = "‚úÖ";
          setTimeout(function () {
            backButton.style.background = "#059669";
            backButton.innerHTML = "üè†";
          }, 800);
        }

        // Alert de confirma√ß√£o para debug
        alert("‚úÖ Voltou para o Dashboard!");
      }

      // Renderizar tabela de agendamentos
      function renderAppointments() {
        var tbody = document.getElementById("appointmentsBody");
        tbody.innerHTML = "";

        for (var i = 0; i < appointments.length; i++) {
          var appointment = appointments[i];
          var row = document.createElement("tr");

          row.innerHTML =
            "<td>" +
            '<div style="font-weight: 500;">' +
            appointment.patient +
            "</div>" +
            '<div style="font-size: 14px; color: #6b7280;">' +
            appointment.phone +
            "</div>" +
            "</td>" +
            "<td>" +
            appointment.time +
            "</td>" +
            "<td>" +
            appointment.specialty +
            "</td>" +
            "<td>" +
            '<span class="badge ' +
            getStatusBadgeClass(appointment.status) +
            '">' +
            getStatusText(appointment.status) +
            "</span>" +
            "</td>" +
            "<td>" +
            '<span class="badge ' +
            getRiskBadgeClass(appointment.riskLevel) +
            '">' +
            getRiskText(appointment.riskLevel) +
            "</span>" +
            "</td>" +
            "<td>" +
            getActionButtons(appointment) +
            "</td>";

          tbody.appendChild(row);
        }
      }

      // Renderizar lista de espera
      function renderWaitingList() {
        var container = document.getElementById("waitingListContainer");

        if (waitingList.length === 0) {
          container.innerHTML =
            '<div class="empty-state">' +
            '<div style="font-size: 48px; margin-bottom: 16px;">üë•</div>' +
            "<p>Nenhum paciente na lista de espera no momento</p>" +
            "</div>";
          return;
        }

        container.innerHTML = "";
        for (var i = 0; i < waitingList.length; i++) {
          var patient = waitingList[i];
          var item = document.createElement("div");
          item.className = "waiting-item";
          item.innerHTML =
            '<div class="patient-info">' +
            "<h4>" +
            patient.patient +
            "</h4>" +
            '<div class="phone">' +
            patient.phone +
            "</div>" +
            '<div class="specialty">' +
            patient.specialty +
            "</div>" +
            "</div>" +
            '<button class="btn btn-sm" onclick="notifyWaitingPatient(' +
            patient.id +
            ')">' +
            "üì± Notificar Vaga" +
            "</button>" +
            '<button class="btn btn-sm btn-orange" onclick="removeFromWaitingList(' +
            patient.id +
            ')" style="margin-left: 8px;">' +
            "üóëÔ∏è Remover" +
            "</button>";
          container.appendChild(item);
        }
      }

      // Fun√ß√µes auxiliares
      function getStatusBadgeClass(status) {
        switch (status) {
          case "confirmed":
            return "badge-green";
          case "not_confirmed":
            return "badge-red";
          case "confirmation_sent":
            return "badge-blue";
          default:
            return "badge-yellow";
        }
      }

      function getRiskBadgeClass(risk) {
        switch (risk) {
          case "high":
            return "badge-red";
          case "medium":
            return "badge-yellow";
          default:
            return "badge-green";
        }
      }

      function getStatusText(status) {
        switch (status) {
          case "confirmed":
            return "Confirmado";
          case "not_confirmed":
            return "N√£o Confirmado";
          case "confirmation_sent":
            return "Confirma√ß√£o Enviada";
          default:
            return "Pendente";
        }
      }

      function getRiskText(risk) {
        switch (risk) {
          case "high":
            return "Alto";
          case "medium":
            return "M√©dio";
          default:
            return "Baixo";
        }
      }

      function getActionButtons(appointment) {
        if (appointment.status === "pending") {
          return (
            '<div class="action-buttons">' +
            '<button class="btn btn-sm btn-green" onclick="sendConfirmation(' +
            appointment.id +
            ', \'whatsapp\')" title="Enviar via WhatsApp">' +
            "üì± WhatsApp" +
            "</button>" +
            '<button class="btn btn-sm" onclick="sendConfirmation(' +
            appointment.id +
            ', \'sms\')" title="Enviar via SMS">' +
            "üí¨ SMS" +
            "</button>" +
            "</div>"
          );
        } else if (appointment.status === "not_confirmed") {
          return (
            '<button class="btn btn-sm btn-orange" onclick="offerToWaitingList(' +
            appointment.id +
            ')">' +
            "üîÑ Oferecer para Lista" +
            "</button>"
          );
        }
        return '<span style="color: #6b7280;">Confirmado ‚úÖ</span>';
      }

      // A√ß√µes dos bot√µes
      function sendConfirmation(appointmentId, method) {
        var appointment = null;
        for (var i = 0; i < appointments.length; i++) {
          if (appointments[i].id === appointmentId) {
            appointment = appointments[i];
            break;
          }
        }

        if (!appointment) return;

        appointment.status = "confirmation_sent";
        renderAppointments();

        alert(
          "üì± Confirma√ß√£o enviada via " +
            (method === "whatsapp" ? "WhatsApp" : "SMS") +
            " para " +
            appointment.patient
        );

        // Simular resposta ap√≥s 2 segundos
        setTimeout(function () {
          appointment.status =
            Math.random() > 0.3 ? "confirmed" : "not_confirmed";
          renderAppointments();
          updateDashboardStats();

          if (appointment.status === "confirmed") {
            alert(
              "‚úÖ " +
                appointment.patient +
                " confirmou a consulta!\n\n" +
                "üéÅ BONIFICA√á√ÉO CONFIRMA√ç:\n" +
                "‚≠ê +10 pontos pela confirma√ß√£o\n" +
                "üé™ Paciente pode resgatar benef√≠cios culturais!\n" +
                "üì± Envie o link dos projetos da Prefeitura"
            );
          } else {
            alert(
              "‚ùå " +
                appointment.patient +
                " n√£o confirmou. Vaga dispon√≠vel para lista de espera."
            );
          }
        }, 2000);
      }

      function offerToWaitingList(appointmentId) {
        var appointment = null;
        for (var i = 0; i < appointments.length; i++) {
          if (appointments[i].id === appointmentId) {
            appointment = appointments[i];
            break;
          }
        }

        var waitingPatient = null;
        for (var i = 0; i < waitingList.length; i++) {
          if (waitingList[i].specialty === appointment.specialty) {
            waitingPatient = waitingList[i];
            break;
          }
        }

        if (waitingPatient) {
          appointment.patient = waitingPatient.patient;
          appointment.phone = waitingPatient.phone;
          appointment.status = "confirmed";
          appointment.riskLevel = "low";

          // Remover da lista de espera
          for (var i = 0; i < waitingList.length; i++) {
            if (waitingList[i].id === waitingPatient.id) {
              waitingList.splice(i, 1);
              break;
            }
          }

          renderAppointments();
          renderWaitingList();
          updateDashboardStats();
          alert(
            "‚úÖ Vaga oferecida para " +
              waitingPatient.patient +
              " da lista de espera!"
          );
        } else {
          alert(
            "‚ùå Nenhum paciente na lista de espera para esta especialidade."
          );
        }
      }

      function notifyWaitingPatient(patientId) {
        var patient = null;
        for (var i = 0; i < waitingList.length; i++) {
          if (waitingList[i].id === patientId) {
            patient = waitingList[i];
            break;
          }
        }

        if (patient) {
          alert(
            "üì± Notifica√ß√£o enviada para " +
              patient.patient +
              " sobre vaga dispon√≠vel!"
          );
        }
      }

      // Fun√ß√µes para lista de espera
      function openNewWaitingForm() {
        document.getElementById("newWaitingForm").style.display = "block";
        // Limpar campos
        document.getElementById("newWaitingName").value = "";
        document.getElementById("newWaitingPhone").value = "";
        document.getElementById("newWaitingSpecialty").value = "Cardiologia";
      }

      function closeNewWaitingForm() {
        document.getElementById("newWaitingForm").style.display = "none";
      }

      function saveNewWaitingPatient() {
        var name = document.getElementById("newWaitingName").value;
        var phone = document.getElementById("newWaitingPhone").value;
        var specialty = document.getElementById("newWaitingSpecialty").value;

        // Validar campos obrigat√≥rios
        if (!name || !phone) {
          alert(
            "‚ùå Por favor, preencha todos os campos obrigat√≥rios (Nome e Telefone)."
          );
          return;
        }

        // Formatar telefone se necess√°rio
        if (phone && !phone.includes("(")) {
          phone =
            "(" +
            phone.substring(0, 2) +
            ") " +
            phone.substring(2, 7) +
            "-" +
            phone.substring(7);
        }

        // Gerar novo ID
        var newId =
          waitingList.length > 0
            ? Math.max.apply(
                Math,
                waitingList.map(function (patient) {
                  return patient.id;
                })
              ) + 1
            : 1;

        // Criar novo paciente na lista de espera
        var newWaitingPatient = {
          id: newId,
          patient: name,
          phone: phone,
          specialty: specialty,
        };

        // Adicionar √† lista
        waitingList.push(newWaitingPatient);

        // Fechar formul√°rio e atualizar lista
        closeNewWaitingForm();
        renderWaitingList();

        alert(
          "‚úÖ " +
            name +
            " foi adicionado √† lista de espera para " +
            specialty +
            "!\nüîî Ser√° notificado quando houver vaga dispon√≠vel."
        );
      }

      // Fun√ß√µes para novo agendamento
      function openNewAppointmentForm() {
        document.getElementById("newAppointmentForm").style.display = "block";
        // Limpar campos
        document.getElementById("newPatientName").value = "";
        document.getElementById("newPatientPhone").value = "";
        document.getElementById("newAppointmentTime").value = "";
        document.getElementById("newAppointmentSpecialty").value =
          "Cardiologia";
        document.getElementById("newAppointmentRisk").value = "low";
      }

      function closeNewAppointmentForm() {
        document.getElementById("newAppointmentForm").style.display = "none";
      }

      function saveNewAppointment() {
        var name = document.getElementById("newPatientName").value;
        var phone = document.getElementById("newPatientPhone").value;
        var time = document.getElementById("newAppointmentTime").value;
        var specialty = document.getElementById(
          "newAppointmentSpecialty"
        ).value;
        var risk = document.getElementById("newAppointmentRisk").value;

        // Validar campos obrigat√≥rios
        if (!name || !phone || !time) {
          alert(
            "‚ùå Por favor, preencha todos os campos obrigat√≥rios (Nome, Telefone e Hor√°rio)."
          );
          return;
        }

        // Formatar telefone se necess√°rio
        if (phone && !phone.includes("(")) {
          phone =
            "(" +
            phone.substring(0, 2) +
            ") " +
            phone.substring(2, 7) +
            "-" +
            phone.substring(7);
        }

        // Gerar novo ID
        var newId =
          Math.max.apply(
            Math,
            appointments.map(function (apt) {
              return apt.id;
            })
          ) + 1;

        // Criar novo agendamento
        var newAppointment = {
          id: newId,
          patient: name,
          phone: phone,
          time: time,
          status: "pending",
          riskLevel: risk,
          specialty: specialty,
        };

        // Adicionar √† lista
        appointments.push(newAppointment);

        // Fechar formul√°rio e atualizar tabela
        closeNewAppointmentForm();
        renderAppointments();
        updateDashboardStats();

        alert(
          "‚úÖ Agendamento criado com sucesso para " +
            name +
            " √†s " +
            time +
            "!\n\n" +
            "üì± Confirma√ß√£o ser√° enviada automaticamente\n" +
            "üéÅ Paciente pode ganhar pontos e resgatar benef√≠cios culturais!\n" +
            "üèõÔ∏è Parceria com Prefeitura do Recife ativa"
        );
      }

      function removeFromWaitingList(patientId) {
        var patient = null;
        for (var i = 0; i < waitingList.length; i++) {
          if (waitingList[i].id === patientId) {
            patient = waitingList[i];
            break;
          }
        }

        if (
          patient &&
          confirm(
            "‚ùì Tem certeza que deseja remover " +
              patient.patient +
              " da lista de espera?"
          )
        ) {
          // Remover da lista
          for (var i = 0; i < waitingList.length; i++) {
            if (waitingList[i].id === patientId) {
              waitingList.splice(i, 1);
              break;
            }
          }

          renderWaitingList();
          alert("‚úÖ " + patient.patient + " foi removido da lista de espera.");
        }
      }

      // Renderizar projetos culturais
      function renderCulturalProjects() {
        var container = document.getElementById("culturalProjectsContainer");
        container.innerHTML = "";

        for (var i = 0; i < culturalProjects.length; i++) {
          var project = culturalProjects[i];
          var projectCard = document.createElement("div");
          projectCard.style.cssText =
            "background: white; border-radius: 12px; padding: 20px; border: 1px solid #e5e7eb; transition: transform 0.2s, box-shadow 0.2s; cursor: pointer;";
          projectCard.onmouseover = function () {
            this.style.transform = "translateY(-4px)";
            this.style.boxShadow = "0 10px 25px rgba(0,0,0,0.1)";
          };
          projectCard.onmouseout = function () {
            this.style.transform = "translateY(0)";
            this.style.boxShadow = "none";
          };

          projectCard.innerHTML =
            '<div style="display: flex; align-items: center; margin-bottom: 12px;">' +
            '<div style="font-size: 32px; margin-right: 12px;">' +
            project.image +
            "</div>" +
            "<div>" +
            '<h4 style="font-weight: 600; margin-bottom: 4px; color: #1f2937;">' +
            project.title +
            "</h4>" +
            '<span style="background: #dbeafe; color: #1e40af; padding: 2px 8px; border-radius: 12px; font-size: 12px; font-weight: 500;">' +
            project.category +
            "</span>" +
            "</div>" +
            "</div>" +
            '<p style="color: #6b7280; font-size: 14px; margin-bottom: 12px; line-height: 1.5;">' +
            project.description +
            "</p>" +
            '<div style="margin-bottom: 12px;">' +
            '<div style="display: flex; align-items: center; margin-bottom: 4px;">' +
            '<span style="font-size: 14px; margin-right: 8px;">üìÖ</span>' +
            '<span style="font-size: 14px; color: #374151;">' +
            project.date +
            "</span>" +
            "</div>" +
            '<div style="display: flex; align-items: center;">' +
            '<span style="font-size: 14px; margin-right: 8px;">üìç</span>' +
            '<span style="font-size: 14px; color: #374151;">' +
            project.location +
            "</span>" +
            "</div>" +
            "</div>" +
            '<div style="display: flex; justify-content: space-between; align-items: center;">' +
            '<div style="display: flex; align-items: center;">' +
            '<span style="font-size: 16px; margin-right: 4px;">‚≠ê</span>' +
            '<span style="font-weight: 600; color: #f59e0b;">' +
            project.points +
            " pontos</span>" +
            "</div>" +
            '<button class="btn btn-sm" onclick="shareProject(' +
            project.id +
            ')" style="background: #10b981;">' +
            "üì§ Compartilhar" +
            "</button>" +
            "</div>";

          container.appendChild(projectCard);
        }
      }

      // Renderizar benef√≠cios
      function renderBenefits() {
        var container = document.getElementById("benefitsContainer");
        container.innerHTML = "";

        for (var i = 0; i < availableBenefits.length; i++) {
          var benefit = availableBenefits[i];
          var benefitCard = document.createElement("div");
          benefitCard.style.cssText =
            "background: linear-gradient(135deg, #fef7ff 0%, #f3e8ff 100%); border-radius: 12px; padding: 20px; border: 2px solid #e879f9; transition: transform 0.2s;";
          benefitCard.onmouseover = function () {
            this.style.transform = "scale(1.02)";
          };
          benefitCard.onmouseout = function () {
            this.style.transform = "scale(1)";
          };

          benefitCard.innerHTML =
            '<div style="text-align: center; margin-bottom: 16px;">' +
            '<div style="font-size: 48px; margin-bottom: 8px;">' +
            benefit.image +
            "</div>" +
            '<h4 style="font-weight: 600; margin-bottom: 8px; color: #581c87;">' +
            benefit.title +
            "</h4>" +
            '<span style="background: #a855f7; color: white; padding: 4px 12px; border-radius: 16px; font-size: 12px; font-weight: 500;">' +
            benefit.category +
            "</span>" +
            "</div>" +
            '<p style="color: #6b46c1; font-size: 14px; margin-bottom: 16px; text-align: center; line-height: 1.4;">' +
            benefit.description +
            "</p>" +
            '<div style="margin-bottom: 16px; text-align: center;">' +
            '<div style="background: white; padding: 8px 16px; border-radius: 8px; margin-bottom: 8px;">' +
            '<span style="font-weight: 600; color: #f59e0b; font-size: 18px;">‚≠ê ' +
            benefit.points +
            " pontos</span>" +
            "</div>" +
            '<div style="font-size: 12px; color: #7c3aed;">' +
            "‚è∞ V√°lido por: " +
            benefit.validity +
            "</div>" +
            "</div>" +
            '<button class="btn btn-sm" onclick="redeemBenefit(' +
            benefit.id +
            ')" style="width: 100%; background: #a855f7; border: none;">' +
            "üéÅ Resgatar Benef√≠cio" +
            "</button>";

          container.appendChild(benefitCard);
        }
      }

      // Fun√ß√µes de intera√ß√£o para bonifica√ß√µes
      function shareProject(projectId) {
        var project = null;
        for (var i = 0; i < culturalProjects.length; i++) {
          if (culturalProjects[i].id === projectId) {
            project = culturalProjects[i];
            break;
          }
        }

        if (project) {
          alert(
            'üì§ Link do projeto "' +
              project.title +
              '" copiado!\n\n' +
              "üîó Compartilhe com seus pacientes via WhatsApp:\n" +
              '"Ol√°! A cl√≠nica tem uma parceria incr√≠vel com a Prefeitura do Recife. ' +
              "Confira este projeto cultural: " +
              project.title +
              " - " +
              project.description +
              '"'
          );
        }
      }

      function redeemBenefit(benefitId) {
        var benefit = null;
        for (var i = 0; i < availableBenefits.length; i++) {
          if (availableBenefits[i].id === benefitId) {
            benefit = availableBenefits[i];
            break;
          }
        }

        if (benefit) {
          alert(
            'üéÅ Benef√≠cio "' +
              benefit.title +
              '" dispon√≠vel para resgate!\n\n' +
              "üí∞ Custo: " +
              benefit.points +
              " pontos\n" +
              "‚è∞ Validade: " +
              benefit.validity +
              "\n\n" +
              "üì± Envie este c√≥digo para o paciente via WhatsApp:\n" +
              "VivaMais-" +
              benefitId +
              "-" +
              Math.floor(Math.random() * 10000)
          );
        }
      }

      function showPointsDetails() {
        alert(
          "‚≠ê SISTEMA DE PONTOS VIVAMAIS\n\n" +
            "üìä COMO FUNCIONA:\n" +
            "‚Ä¢ Cada confirma√ß√£o = +10 pontos\n" +
            "‚Ä¢ Pontualidade = +5 pontos\n" +
            "‚Ä¢ Consulta realizada = +15 pontos\n" +
            "‚Ä¢ Indica√ß√£o = +25 pontos\n\n" +
            "üéÅ OS PACIENTES PODEM RESGATAR:\n" +
            "‚Ä¢ Ingressos para museus\n" +
            "‚Ä¢ Descontos em teatros\n" +
            "‚Ä¢ Passeios culturais\n" +
            "‚Ä¢ Workshops e oficinas\n\n" +
            "üìà RESULTADO: +34% na taxa de confirma√ß√£o!"
        );
      }

      function refreshCulturalProjects() {
        renderCulturalProjects();
        alert(
          "üîÑ Projetos culturais atualizados!\n\n" +
            "üìÖ Novos eventos adicionados da Prefeitura do Recife\n" +
            "üé® " +
            culturalProjects.length +
            " projetos culturais dispon√≠veis\n" +
            "ü§ù Parceria ativa com Secretaria de Cultura"
        );
      }

      function openBenefitsManager() {
        alert(
          "‚öôÔ∏è GERENCIADOR DE BENEF√çCIOS\n\n" +
            "üìä ESTAT√çSTICAS:\n" +
            "‚Ä¢ " +
            availableBenefits.length +
            " benef√≠cios ativos\n" +
            "‚Ä¢ 89 resgates este m√™s\n" +
            "‚Ä¢ 156 pacientes engajados\n\n" +
            "üîß A√á√ïES DISPON√çVEIS:\n" +
            "‚Ä¢ Adicionar novos benef√≠cios\n" +
            "‚Ä¢ Alterar pontua√ß√£o necess√°ria\n" +
            "‚Ä¢ Configurar parcerias\n" +
            "‚Ä¢ Relat√≥rio de engajamento"
        );
      }

      // Fun√ß√£o para atualizar estat√≠sticas do dashboard
      function updateDashboardStats() {
        var totalAppointments = appointments.length;
        var confirmedCount = 0;
        var pendingCount = 0;

        for (var i = 0; i < appointments.length; i++) {
          if (appointments[i].status === "confirmed") {
            confirmedCount++;
          } else if (appointments[i].status === "pending") {
            pendingCount++;
          }
        }

        var confirmationRate =
          totalAppointments > 0
            ? Math.round((confirmedCount / totalAppointments) * 100)
            : 0;

        // Atualizar no DOM se estivermos na se√ß√£o dashboard
        var totalElement = document.querySelector(".stat-value");
        if (totalElement) {
          totalElement.textContent = totalAppointments;
        }
      }

      // Inicializar quando a p√°gina carregar
      document.addEventListener("DOMContentLoaded", function () {
        renderAppointments();
        renderWaitingList();
        renderCulturalProjects();
        renderBenefits();
        updateDashboardStats();

        // Verificar se bot√µes existem
        var menuBtn = document.getElementById("menuToggle");
        var backBtn = document.getElementById("backButton");

        console.log("Menu button:", menuBtn);
        console.log("Back button:", backBtn);

        // Inicializar navega√ß√£o r√°pida
        updateQuickNavigation("dashboard");

        // Mostrar instru√ß√£o mobile se necess√°rio
        if (window.innerWidth <= 768) {
          var instruction = document.getElementById("mobileInstruction");
          var quickNav = document.getElementById("mobileQuickNav");

          if (instruction) {
            instruction.style.display = "block";
            // Esconder ap√≥s 6 segundos
            setTimeout(function () {
              instruction.style.display = "none";
            }, 6000);
          }

          if (quickNav) {
            quickNav.style.display = "block";
          }

          // Adicionar event listener adicional ao bot√£o de voltar
          if (backBtn) {
            backBtn.addEventListener("click", function () {
              console.log("Bot√£o de voltar clicado!");
              voltarParaInicio();
            });
          }
        }

        // Fechar menu mobile quando redimensionar tela
        window.addEventListener("resize", function () {
          if (window.innerWidth > 768) {
            closeMobileMenu();
            var instruction = document.getElementById("mobileInstruction");
            var quickNav = document.getElementById("mobileQuickNav");
            if (instruction) instruction.style.display = "none";
            if (quickNav) quickNav.style.display = "none";
          } else {
            var instruction = document.getElementById("mobileInstruction");
            var quickNav = document.getElementById("mobileQuickNav");
            if (instruction) instruction.style.display = "block";
            if (quickNav) quickNav.style.display = "block";
          }
        });
      });
    </script>
  </body>
</html>
